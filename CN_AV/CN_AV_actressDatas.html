<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>女优详情</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    color: #fff;
    position: relative;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* 背景图 */
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-url) center center / cover no-repeat;
    filter: brightness(0.3);
    opacity: 0.6;
    z-index: -1;
  }

  .container {
    width: 100%;
    min-height: 100vh;
    padding: 50px 80px;
    background: rgba(0,0,0,0.6);
    box-sizing: border-box;
  }

  .profile {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
  }

  .profile img {
    width: 350px;
    height: auto;
    border-radius: 10px;
    display: block;
  }

  .info { flex: 1; }
  .info h1 { margin: 0; font-size: 28px; }
  .features span {
    display: inline-block;
    background: #ff9800;
    color: #000;
    padding: 2px 8px;
    margin: 2px;
    border-radius: 4px;
    font-size: 12px;
  }

  .description {
    margin-top: 40px;
  }

  .gallery {
    margin-top: 30px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px,1fr));
    gap: 10px;
  }

  .gallery img {
    width: 100%;
    border-radius: 6px;
    display: block;
  }
</style>
</head>
<body>

<div class="container">
  <div class="profile">
    <img id="profile-img" src="" alt="">
    <div class="info">
      <h1 id="name"></h1>
      <p>年龄: <span id="age"></span></p>
      <p>生日: <span id="birthday"></span></p>
      <p>星座: <span id="zodiac"></span></p>
      <p>身高: <span id="height"></span></p>
      <p>三围: <span id="measurements"></span></p>
      <p>罩杯: <span id="cup"></span></p>
      <p>作品数量: <span id="works_count"></span></p>
      <div class="features" id="features"></div>
      <p>别名: <span id="aliases"></span></p>
    </div>
  </div>

  <div class="description">
    <h2>简介</h2>
    <p id="description"></p>
  </div>

  <div class="gallery" id="gallery"></div>
</div>

<script>
// 从 URL 获取 series 参数
function getSeriesName() {
  const params = new URLSearchParams(window.location.search);
  return params.get('series') || '1'; // 默认 1
}

// 动态加载 JS 数据文件
function loadSeriesData(seriesName) {
  const script = document.createElement('script');
  script.src = "menu/" + seriesName + "_AVactress_data.js"; // 目录 + 文件名
  script.onload = () => {
    // 兼容 window.actressData 或 export default actressData
    if (window.actressData) {
      initPage(window.actressData);
    } else if (typeof actressData !== 'undefined') {
      initPage(actressData);
    } else {
      alert("actressData 未定义，检查数据文件格式。");
    }
  };
  script.onerror = () => alert("剧集数据加载失败: " + seriesName);
  document.body.appendChild(script);
}

// 初始化页面
function initPage(actressData) {
  if (!actressData) {
    console.error("未获取到 actressData");
    return;
  }

  console.log("加载到的演员数据:", actressData);

  // 设置背景图
  if (actressData.background_img) {
    document.body.style.setProperty('--bg-url', `url('${actressData.background_img}')`);
  }

  // 填充信息
  const profileImg = document.getElementById("profile-img");
  profileImg.src = actressData.img_url || "";
  profileImg.alt = actressData.name || "";
  profileImg.onerror = () => profileImg.style.display = 'none';

  document.getElementById("name").textContent = actressData.name || "";
  document.getElementById("age").textContent = actressData.age || "";
  document.getElementById("birthday").textContent = actressData.birthday_date || "";
  document.getElementById("zodiac").textContent = actressData.zodiac || "";
  document.getElementById("height").textContent = actressData.height || "";
  document.getElementById("measurements").textContent = actressData.measurements || "";
  document.getElementById("cup").textContent = actressData.cup || "";
  document.getElementById("works_count").textContent = actressData.works_count || 0;
  document.getElementById("description").textContent = actressData.description || "";

  // 特征标签
  const featuresDiv = document.getElementById("features");
  featuresDiv.innerHTML = "";
  if (Array.isArray(actressData.features)) {
    actressData.features.forEach(f => {
      const span = document.createElement("span");
      span.textContent = f;
      featuresDiv.appendChild(span);
    });
  }

  // 别名
  document.getElementById("aliases").textContent = Array.isArray(actressData.aliases)
    ? actressData.aliases.join(", ")
    : (actressData.aliases || "");

  // 图集
  const galleryDiv = document.getElementById("gallery");
  galleryDiv.innerHTML = "";
  if (Array.isArray(actressData.gallery)) {
    actressData.gallery.forEach(url => {
      const img = document.createElement("img");
      img.src = url;
      img.alt = "写真图集";
      img.onerror = () => img.style.display = 'none';
      galleryDiv.appendChild(img);
    });
  } else {
    const p = document.createElement("p");
    p.textContent = "暂无图集";
    galleryDiv.appendChild(p);
  }
}

// 执行加载
const seriesName = getSeriesName();
loadSeriesData(seriesName);
</script>

</body>
</html>
