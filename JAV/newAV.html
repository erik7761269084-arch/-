<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å›½äº§AV - æœ€æ–°100å½±ç‰‡</title>
<style>
body { margin:0; font-family:"å¾®è½¯é›…é»‘",sans-serif; background:#0d0d0d; color:#fff; padding-top:60px; }
.grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:20px; padding:20px; }
.card { position:relative; background:#1a1a1a; border-radius:8px; overflow:hidden; cursor:pointer; transition:transform .2s ease,box-shadow .2s ease; display:flex; flex-direction:column; }
.card:hover { transform:scale(1.05); box-shadow:0 4px 12px rgba(255,255,255,.2); }
.card img { width:100%; aspect-ratio:16/9; object-fit:cover; }
.card-type { position:absolute; bottom:8px; right:8px; font-size:12px; font-weight:bold; color:#fff; background:#ff0000; padding:2px 6px; border-radius:4px; }
.actor { position:absolute; bottom:8px; left:8px; background:rgba(0,0,0,0.5); padding:2px 6px; border-radius:4px; font-size:12px; }
.card-info { padding:8px 10px; display:flex; flex-direction:column; gap:6px; }
.card-info-top { display:flex; align-items:center; gap:6px; overflow:hidden; }
.idcode { color:#ffcc00; font-weight:bold; font-size:12px; white-space:nowrap; }
.title { font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; flex-grow:1; }
.card-info-bottom { display:flex; justify-content:space-between; font-size:12px; color:#ccc; }
.star { color:gold; }
.date { display:flex; align-items:center; gap:4px; }
.date::before { content:"ğŸ“…"; }
/* å›ºå®š header */
#header-placeholder {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 999;
}
</style>
</head>
<body>

<div id="header-placeholder"></div>
<div class="grid" id="dramaGrid"></div>
<div id="footer-placeholder"></div>

<script>
/* ========== åŠ è½½é¡¶éƒ¨ header.html + header.js ========== */
fetch('header.html')
  .then(r => r.text())
  .then(html => {
    document.getElementById('header-placeholder').innerHTML = html;
    const s = document.createElement('script');
    s.src = 'header.js';
    s.onload = () => {
      if (typeof initHeaderMenu === 'function') initHeaderMenu();
      if (typeof setActiveMenu === 'function') setActiveMenu('menu-home');
    };
    document.body.appendChild(s);
  });

fetch('https://yunvgong.com/footer.html').then(r => r.text()).then(html => {
  const footer = document.getElementById('footer-placeholder');
  footer.innerHTML = html;
});

// ç‚¹å‡»æ’­æ”¾
function goPlay(url){
  localStorage.setItem('dramaScroll', window.scrollY);
  location.href = url;
}

// æ¸²æŸ“å…¨éƒ¨å½±ç‰‡
function renderAll(data){
  const box = document.getElementById('dramaGrid');
  box.innerHTML = '';
  data.forEach(d => {
    const a = Array.isArray(d.actress) ? d.actress.join("ã€") : (d.actress || 'æœªçŸ¥');
    box.innerHTML += `
      <div class="card" onclick="goPlay('${d.title_play_url}')">
        <div style="position:relative;">
          <img src="${d.cover_url || 'https://via.placeholder.com/320x180?text=No+Cover'}">
          <div class="actor">${a}</div>
          <div class="card-type">${d.type || 'æœªçŸ¥'}</div>
        </div>
        <div class="card-info">
          <div class="card-info-top">
            <span class="idcode">${d.IDcode}</span>
            <span class="title">${d.title}</span>
          </div>
          <div class="card-info-bottom">
            <div class="star">â­â­â­â­â­</div>
            <div class="date">${d.publish_date}</div>
          </div>
        </div>
      </div>
    `;
  });

  // æ¢å¤æ»šåŠ¨ä½ç½®
  const savedScroll = parseInt(localStorage.getItem('dramaScroll'));
  if(savedScroll) window.scrollTo(0, savedScroll);
}

// åªåŠ è½½ latest_100.js
const script = document.createElement('script');
script.src = 'https://yunvgong.com/JAV/category/latest_100.js';
script.onload = () => {
  if(typeof window.PAGE_DATA !== 'undefined'){
    renderAll(window.PAGE_DATA);
  } else {
    console.error("latest_100.js æœªå®šä¹‰ window.PAGE_DATA");
  }
};
document.body.appendChild(script);
</script>

</body>
</html>
