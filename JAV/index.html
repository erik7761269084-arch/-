<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>å¾¡å¥³å®«ç½‘ç«™åˆ†ç±»</title>
<style>
/* å…¨å±€ */
body {
  margin: 0;
  font-family: "å¾®è½¯é›…é»‘", sans-serif;
  background-color: #0d0d0d;
  color: #fff;
  padding-top: 70px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* å›ºå®š header */
#header-placeholder {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 999;
}

/* é¡µé¢æ ‡é¢˜ */
.page-title {
  text-align: center;
  font-size: 28px;
  font-weight: bold;
  color: #ffa500;
  margin: 20px 0 30px;
}
.section-title {
  font-size: 22px;
  font-weight: bold;
  color: #ffa500;
  margin: 30px 0 16px 20px;
}

/* æ ‡é¢˜ + çœ‹æ›´å¤šæŒ‰é’® */
.section-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 30px 20px 16px;
}
.section-title-row .section-title { margin: 0; }
.more-link {
  color: #ffa500;
  font-size: 15px;
  text-decoration: none;
  transition: color 0.2s;
}
.more-link:hover { color: #ff6600; text-decoration: underline; }

/* ç½‘æ ¼ */
.grid-3 { display: grid; grid-template-columns: repeat(3,1fr); gap: 20px; padding: 0 20px; }
.grid-5 { display: grid; grid-template-columns: repeat(5,1fr); gap: 18px; padding: 0 20px; }

/* å¡ç‰‡ */
.card {
  background:#1a1a1a; border-radius:10px; overflow:hidden; position:relative;
  cursor:pointer; aspect-ratio:16/9;
  transition: transform .22s ease, box-shadow .22s ease;
}
.card img { width:100%; height:100%; object-fit:cover; opacity:0.6; transition:opacity .22s; }
.card:hover { transform:scale(1.03); box-shadow:0 6px 18px rgba(255,255,255,0.08); }
.card:hover img { opacity:0.3; }
.card .card-title { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); color:#fff; font-weight:700; font-size:18px; text-align:center; }

/* å¥³ä¼˜ */
.actress-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:18px; padding:0 20px 20px; }
.actress-card { background:#1a1a1a; border-radius:8px; overflow:hidden; cursor:pointer; transition:transform .2s; }
.actress-card img { width:100%; height:220px; object-fit:cover; background:#222; }
.card-title2 { padding:10px; font-size:15px; text-align:center; color:#eee; }
.card-info { font-size:13px; color:#ccc; text-align:center; padding-bottom:10px; line-height:1.5; }

/* å›½äº§AV å¡ç‰‡ */
.drama-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:20px; padding:0 20px 40px; }
.drama-card { background:#1a1a1a; border-radius:8px; overflow:hidden; cursor:pointer; transition:transform .18s; }
.drama-card img { width:100%; aspect-ratio:16/9; object-fit:cover; }
.drama-card .actor { position:absolute; bottom:8px; left:8px; background:rgba(0,0,0,.5); padding:2px 6px; border-radius:4px; font-size:12px; color:#fff; }
.drama-card .card-type { position:absolute; bottom:8px; right:8px; background:#ff3b3b; padding:2px 6px; border-radius:4px; font-size:12px; font-weight:700; color:#fff; }
.drama-info { padding:8px 10px; }
.drama-info .idcode { color:#ffcc00; font-weight:700; font-size:12px; }
.drama-info .title { color:#fff; font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.drama-info .meta { margin-top:6px; display:flex; justify-content:space-between; color:#ccc; font-size:12px; }

/* å“åº”å¼ */
@media (max-width: 992px) { .grid-5 { grid-template-columns: repeat(3,1fr); } .grid-3 { grid-template-columns: repeat(2,1fr); } }
@media (max-width: 600px) { .grid-5, .grid-3 { grid-template-columns: 1fr; } .actress-grid { grid-template-columns: repeat(auto-fill,minmax(140px,1fr)); } }
</style>
</head>
<body>

<!-- å›ºå®šé¡¶éƒ¨ header -->
<div id="header-placeholder"></div>

<div class="page-title">å¾¡å¥³å®«ç½‘ç«™åˆ†ç±»</div>

<!-- åˆ†ç±» -->
<section>
  <div class="grid-3" id="categoryGrid"></div>
</section>

<!-- æœ€æ–°å‘å¸ƒ -->
<section>
  <div class="section-title-row">
    <div class="section-title">ğŸ”¥ æœ€æ–°å‘å¸ƒAç‰‡</div>
    <a href="https://yunvgong.com/JAV/newAV" class="more-link" target="_blank">çœ‹æ›´å¤š â€º</a>
  </div>
  <div class="grid-5" id="latestGrid"></div>
</section>

<!-- å¥³ä¼˜ -->
<section>
  <div class="section-title-row">
    <div class="section-title">ğŸ’ƒ AVå¥³ä¼˜é€‰ç‰‡</div>
    <a href="https://yunvgong.com/JAV/actress" class="more-link" target="_blank">çœ‹æ›´å¤š â€º</a>
  </div>
  <div class="actress-grid" id="actressGrid"></div>
</section>

<!-- å‚å•† -->
<section>
  <div class="section-title-row">
    <div class="section-title">ğŸ­ AVå½±ç‰‡å‚å•†</div>
    <a href="https://yunvgong.com/JAV/company" class="more-link" target="_blank">çœ‹æ›´å¤š â€º</a>
  </div>
  <div class="company-wrap">
    <div class="grid-5" id="companyGrid"></div>
  </div>
</section>

<!-- æ—¥æœ¬AV -->
<section>
  <div class="section-title-row">
    <div class="section-title">ğŸ¬ æ—¥æœ¬AVä¸“åŒº</div>
    <a href="https://yunvgong.com/JAV/main" class="more-link" target="_blank">çœ‹æ›´å¤š â€º</a>
  </div>
  <div class="drama-grid" id="chinaGrid"></div>
</section>

<!-- åº•éƒ¨ footer -->
<div id="footer-placeholder"></div>

<script>
/* ======= åŠ è½½ header.html + header.js ======= */
fetch('header.html')
  .then(res => res.text())
  .then(html => {
    document.getElementById('header-placeholder').innerHTML = html;

    // åŠ è½½ header.js æ–‡ä»¶
    const script = document.createElement('script');
    script.src = 'header.js';
    script.onload = () => {
      if (typeof initHeaderMenu === 'function') initHeaderMenu();
      if (typeof setActiveMenu === 'function') setActiveMenu('menu-drama');
    };
    document.body.appendChild(script);
  });

/* åŠ è½½åº•éƒ¨ footer.htmlï¼ˆæ­£ç¡®ç‰ˆæœ¬ + åŠ ç²—æ ‡é¢˜ï¼‰*/
fetch('https://yunvgong.com/footer.html')
  .then(r => r.text())
  .then(html => {
    const footer = document.createElement('div');
    footer.innerHTML = html
      .replace(/å¾¡å¥³å®«/g, '<b>å¾¡å¥³å®«</b>');  // åŠ ç²—æ ‡é¢˜å…³é”®è¯
    document.body.appendChild(footer);
  })
  .catch(e => console.warn('æ— æ³•åŠ è½½ footer.html:', e));


/* åˆ†ç±»ç½‘æ ¼ */
async function loadCategories() {
  const res = await fetch("https://yunvgong.com/JAV/category/new_cover.json");
  const data = await res.json();
  const container = document.getElementById('categoryGrid');
  container.innerHTML = '';
  data.slice(0,3).forEach(it => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<img src="${it.img_url}" alt=""><div class="card-title">${it.company||it.name||''}</div>`;
    card.onclick = () => { if(it.company_url) window.location.href = it.company_url; };
    container.appendChild(card);
  });
}

/* æœ€æ–°å‘å¸ƒAç‰‡ - åŠ è½½ latest_100.js */
function loadLatestAV() {
  const script = document.createElement('script');
  script.src = 'https://yunvgong.com/JAV/category/latest_100.js';
  script.onload = () => {
    if (typeof window.PAGE_DATA !== 'undefined') {
      const dramas = window.PAGE_DATA.slice(0, 30);
      const target = document.getElementById('latestGrid');
      target.innerHTML = '';
      dramas.forEach(d => {
        const card = document.createElement('div');
        card.className = 'drama-card';
        const actressStr = Array.isArray(d.actress) ? d.actress.join('ã€') : (d.actress || '');
        card.innerHTML = `
          <div style="position:relative;">
            <img src="${d.cover_url||''}" alt="${d.title||''}">
            <div class="actor">${actressStr}</div>
            <div class="card-type">${d.type||''}</div>
          </div>
          <div class="drama-info">
            <div class="idcode">${d.IDcode||''}</div>
            <div class="title">${d.title||''}</div>
            <div class="meta">
              <span>ğŸ“… ${d.publish_date||''}</span>
              <span>â­ ${d.rating||''}</span>
            </div>
          </div>`;
        card.onclick = () => { if(d.title_play_url) window.location.href = d.title_play_url; };
        target.appendChild(card);
      });
    } else {
      console.error("latest_100.js æœªå®šä¹‰ window.PAGE_DATA");
    }
  };
  document.body.appendChild(script);
}

/* å¥³ä¼˜ï¼ˆè¯»å–æœ¬åœ°åˆ†é¡µ JSï¼‰ */
async function loadActresses(page = 1) {

  // æœ€å¤§é¡µï¼ˆæ ¹æ®ä½ çš„èµ„æºæƒ…å†µä¿®æ”¹ï¼‰
  const MAX_PAGE = 52;
  if(page < 1) page = 1;
  if(page > MAX_PAGE) page = MAX_PAGE;

  // æ¸…ç©ºåŸåˆ—è¡¨
  const c = document.getElementById('actressGrid');
  c.innerHTML = '<p style="color:#aaa;text-align:center;">åŠ è½½ä¸­...</p>';

  // åŠ è½½åˆ†é¡µ JS
  const script = document.createElement('script');
  script.src = `https://yunvgong.com/JAV/category/actress_page/page_${page}.js${page>1 ? '?pages='+page : ''}`;

  script.onload = () => {
    if(typeof window.PAGE_DATA === 'undefined'){
      c.innerHTML = '<p style="color:#f66;text-align:center;">æ•°æ®åŠ è½½å¤±è´¥</p>';
      return;
    }

    // å–å‰ 20 ä¸ª
    const list = window.PAGE_DATA.filter(a => a.img_url).slice(0,20);
    c.innerHTML = '';

    list.forEach(a => {
      const card = document.createElement('div');
      card.className = 'actress-card';
      card.innerHTML = `
        <img src="${a.img_url}" alt="${a.name}">
        <div class="card-title2">${a.name}</div>
        <div class="card-info">
          ${a.zodiac ? `ğŸŒŸ ${a.zodiac}<br>` : ''}
          ${a.height ? `ğŸ“ ${a.height}<br>` : ''}
          ${a.measurements ? `ğŸ’ƒ ${a.measurements}` : ''}
        </div>
      `;
      card.onclick = () => { if(a.actress_url) location.href = a.actress_url; };
      c.appendChild(card);
    });

  };

  script.onerror = () => {
    c.innerHTML = '<p style="color:#f66;text-align:center;">åˆ†é¡µæ–‡ä»¶åŠ è½½å¤±è´¥</p>';
  };

  document.body.appendChild(script);
}

/* å‚å•† */
async function loadCompanyList() {
  const res = await fetch("https://yunvgong.com/JAV/category/company_all.json");
  const data = await res.json();
  const companies = data.filter(c=>c.company).slice(0,20);
  const target = document.getElementById('companyGrid');
  target.innerHTML = '';
  companies.forEach(c => {
    const card = document.createElement('div'); card.className='card';
    const img = c.cover || c.img_url || "https://picture.yoshiclub.xyz/20230930/20230930013717874874.jpg";
    card.innerHTML = `<img src="${img}" alt="${c.company}"><div class="card-title">${c.company}</div>`;
    card.onclick = () => { if(c.company_url) window.location.href = c.company_url; };
    target.appendChild(card);
  });
}

/* å›½äº§AVä¸“åŒº */
async function loadChinaDramas() {
  const target = document.getElementById('chinaGrid');
  target.innerHTML = ''; // æ¸…ç©ºåŸæœ‰å†…å®¹

  const script = document.createElement('script');
  script.src = 'https://yunvgong.com/JAV/category/main_page/page_1.js';
  script.onload = () => {
    if (typeof window.PAGE_DATA !== 'undefined') {
      const list = window.PAGE_DATA.slice(0, 30); // å–å‰30æ¡
      list.forEach(d => {
        const card = document.createElement('div');
        card.className = 'drama-card';
        const actressStr = Array.isArray(d.actress) ? d.actress.join('ã€') : (d.actress || '');
        card.innerHTML = `<div style="position:relative;">
            <img src="${d.cover_url||''}" alt="${d.title||''}">
            <div class="actor">${actressStr}</div>
            <div class="card-type">${d.type||''}</div>
          </div>
          <div class="drama-info">
            <div class="idcode">${d.IDcode||''}</div>
            <div class="title">${d.title||''}</div>
            <div class="meta"><span>ğŸ“… ${d.publish_date||''}</span><span>â­ ${d.rating||''}</span></div>
          </div>`;
        card.onclick = () => { if(d.title_play_url) window.location.href = d.title_play_url; };
        target.appendChild(card);
      });
    } else {
      console.error("page_1.js æœªå®šä¹‰ window.PAGE_DATA");
    }
  };
  document.body.appendChild(script);
}


document.addEventListener('DOMContentLoaded', () => {
  loadCategories();
  loadLatestAV();    // è¿™é‡Œæ”¹ä¸ºåŠ è½½ latest_100.js
  loadActresses();
  loadCompanyList();
  loadChinaDramas();
});
</script>
</body>
</html>
